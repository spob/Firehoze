<%
if current_user
  most_popular = Lesson.ready.most_popular.not_owned_by(current_user).paginate :page => params[:page], :per_page => @per_page
else
  most_popular = Lesson.ready.most_popular.paginate :page => params[:page], :per_page => @per_page
end
%>
<div class="lesson_container">
  <%= lessons_header(:most_popular) %>
  <%= render :partial => "lessons/lesson_#{lesson_format}", :collection => most_popular %>
</div>

<%= render :partial => "lessons/pagination", :object => most_popular, :locals => { :collection => :most_popular } %>
