<%= render :partial => "shared/infield_head_content" %>

<%= stylesheet 'validation' %>
<%= javascript 'validate/jquery.validate', 'validate/user.validate' %>

<% form_for([ @registration, @user ], :html => { :class => "new_user", :id => "new_user" }) do |f| %>
  <%= f.error_messages %>
  <fieldset>
    <legend>Your email address has been confirmed.</legend>

    <span class="help">
      <p>Please provide the following information to create your account:</p>
      <p>Username: <%= h @user.login %></p>
      <p>Email: <%= h @user.email %></p>
    </span>
    <p>
      <%= f.label :password %>
      <%= f.password_field :password, :class => "required" %>
    </p>

    <p>
      <%= f.label :password_confirmation %>
      <%= f.password_field :password_confirmation, :class => "required" %>
    </p>

    <p>
      <%= f.label :first_name %>
      <%= f.text_field :first_name, :class => "required" %>
    </p>

    <p>
      <%= f.label :last_name %>
      <%= f.text_field :last_name, :class => "required" %>
    </p>

    <p>
      <%= f.label :bio %><br />
      <%= f.text_area :bio %>
      <span class="help">(Format using *<b>bold</b>* and _<i>italics</i>_ text)</span>
    </p>

    <div>
      <%= f.label :time_zone %>
      <%= f.time_zone_select :time_zone, ActiveSupport::TimeZone.us_zones %>
    </div>

    <div>
      <%= f.label :language %>
      <%= f.select :language, User.supported_languages %>
    </div>

    <b>Firehoze User Agreement</b>

    <div id="user_agreement">
      <%= render :partial => 'pages/policies/user_agreement' %>
    </div>
    <p><%= link_to "Printer Friendly Version", user_agreement_users_path, :popup => true %></p>

    <div>
      <%= check_box_tag :accept_agreement %> By checking this box I hereby agreement to be bound by the terms of this agreement
    </div>

  </fieldset>
  <p><%= f.submit "Register" %></p>
<% end %>
